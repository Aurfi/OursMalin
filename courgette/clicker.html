<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>Courgette Clicker</title>
    <!-- EmpÃªcher l'indexation automatique de cette page afin de rÃ©duire sa
         visibilitÃ© dans les moteurs de recherche et de compliquer les opÃ©rations
         de scraping. -->
    <meta name="robots" content="noindex, nofollow" />
    <!-- Main stylesheet (versioned to bypass service worker cache) -->
    <!-- Bump the version to force the browser to reload the updated CSS -->
    <link rel="stylesheet" href="css/style.css?v=18" />
    <!-- PWA manifest -->
    <link rel="manifest" href="manifest.webmanifest" />
  </head>
  <body>
    <main id="app" class="container" role="main">
      <!-- Title of the game placed at the top of the container -->
      <h1 id="game-title"></h1>

      <!-- Stats -->
      <div id="stats" class="stats">
        <!-- Current stock of courgettes -->
        <div class="main-score">
          <span id="score">0</span> <span data-i18n="scoreCurrent"></span>
        </div>
        <!-- Additional metrics: production per minute and per click -->
        <div class="sub-stats">
          <div>
            <span id="perMin" class="value">0</span> <span data-i18n="perMinute"></span>
          </div>
          <div>
            <span id="perClick" class="value">0</span> <span data-i18n="perClick"></span>
          </div>
        </div>
      </div>

      <!-- Barre de progression : indique le pourcentage vers le prochain bÃ¢timent.
           Une Ã©tiquette indique Ã©galement le nom du prochain Ã©lÃ©ment et l'avancement
           numÃ©rique. -->
      <div class="progress-container" aria-live="polite">
        <span id="progress-label" class="progress-label">&nbsp;</span>
        <div id="progress-bar" class="progress-bar"></div>
      </div>

        <!-- Options: sound, animation, language selection -->
        <div id="options" class="options" role="toolbar" aria-label="Options de jeu">
        <!-- Boutons de navigation : options (settings), succÃ¨s, boosts globaux -->
      </div>
      <div id="clicker-area" class="clicker-area">
        <!-- Zone interactiveÂ : Courgetteâ€‘chan est composÃ©e de plusieurs calques (corps, bras, expression, overlay).
             Les bras et le visage sont remplacÃ©s dynamiquement via JavaScript pour crÃ©er des animations.
             Le conteneur conserve des proportions relatives pour rester responsive. -->
        <button id="clicker" class="clicker">
          <div id="courgette-wrapper" class="courgette-wrapper">
            <!-- Corps principalÂ : image de base sans visage. Le visage est superposÃ© via un calque sÃ©parÃ©. -->
            <!--Â Le corps principal utilise lâ€™image de base sans visage fournie par lâ€™utilisateur. -->
            <img id="courgette-body" src="assets/courgette_base.png" alt="Courgetteâ€‘chan" class="courgette-layer body" />
            <!--Â Le visage est un calque sÃ©parÃ©Â : sa source change dynamiquement selon lâ€™expression (neutre, ouverte, demiâ€‘yeux, clic).
                 On commence par lâ€™expression neutre. -->
            <img id="courgette-face" src="assets/face_neutral_user_latest.png" alt="Visage de Courgetteâ€‘chan" class="courgette-layer face-img" />
            <!-- Membres de Courgetteâ€‘chan dessinÃ©s comme des lignes pour un style stickâ€‘figure. Ils sont positionnÃ©s
                 relativement au conteneur et animÃ©s via JavaScript en rÃ©ponse aux clics. -->
            <div class="limb left-arm"></div>
            <div class="limb right-arm"></div>
            <div class="limb left-leg"></div>
            <div class="limb right-leg"></div>
            <!-- Overlay dâ€™Ã©clairage / profondeur pour accentuer le relief. Il attÃ©nue lÃ©gÃ¨rement le corps lors des clics. -->
            <img id="courgette-overlay" src="assets/courgette_overlay.png" alt="Overlay" class="courgette-layer overlay" />
          </div>
        </button>
      </div>
      <!-- Zone pour les messages humoristiques de type fil d'actualitÃ© -->
      <!-- Zone pour les messages humoristiques de type fil d'actualitÃ©.
           Un capybara journaliste apparaÃ®t sur le cÃ´tÃ© et "crie" les nouvelles dans une bulle faÃ§on bande dessinÃ©e. -->
      <div id="news" class="news">
        <div class="capybara-news">
          <!-- The order of elements is reversed to accommodate the new capybara image facing left.
               The news bubble comes first, followed by the capybara on the right so that the bubble
               appears to emerge from the capybaraâ€™s mouth. -->
          <div id="news-text" class="news-text"></div>
          <div class="capybara-holder">
            <div class="capybara-bg"></div>
            <!-- New realistic capybara image with press hat. The id allows click handling for the easter egg. -->
            <img src="assets/capybara.png" alt="Capybara journaliste" class="capybara-img" id="capybara-img" data-i18n-alt="capybaraAlt" />
          </div>
        </div>
      </div>
      <div id="upgrades" class="upgrades"></div>

      <!-- Challenges section: displays daily and weekly challenges with progress
           indicators and rewards. Initially populated by JavaScript. -->
      <div id="challenges" class="challenges"></div>
      <!-- Section des amÃ©liorations globales est dÃ©sormais accessible via un overlay -->
      <!-- Le conteneur global-upgrades nâ€™est plus affichÃ© ici. Il est rendu dans un overlay sÃ©parÃ©. -->
      <!-- Section prestige pour la mÃ©canique de reset -->
      <div id="prestige" class="prestige">
        <div class="prestige-actions">
          <button id="prestige-btn" class="prestige-btn" data-i18n="prestigeBtn"></button>
          <!-- Button to open the seeds shop. Shows the amount of seeds owned. -->
        </div>
        <div id="prestige-info" class="prestige-info"></div>
      </div>

    <!-- Lâ€™aide contextuelle a Ã©tÃ© supprimÃ©e pour simplifier lâ€™interfaceÂ : les joueurs dÃ©couvrent les mÃ©canismes en jouant. -->

    <!-- Achievements overlay: shows all unlocked and locked achievements along with progress. Initially hidden. -->
    <div id="achievements-overlay" class="achievements-overlay" hidden>
      <div class="achievements-content">
        <h2 data-i18n="achievementsTitle">SuccÃ¨s</h2>
        <p id="achievements-progress" class="achievements-progress"></p>
        <!-- Additional statistics about the current run (clicks, time spent, etc.) -->
        <div id="achievements-stats" class="achievements-stats"></div>
        <div id="achievements-list" class="achievements-list"></div>
        <button id="achievements-close" class="achievements-close" data-i18n="close">Fermer</button>
      </div>
    </div>

    <!-- Global upgrades overlay: displays available and purchased boosts. Hidden by default -->
    <div id="global-upgrades-overlay" class="global-upgrades-overlay" hidden>
      <div class="global-upgrades-content">
        <h2 id="global-upgrades-title" data-i18n="globalUpgradesTitle">Boosts globaux</h2>
        <div id="global-upgrades-list" class="upgrades"></div>
        <button id="global-upgrades-close" class="global-upgrades-close" data-i18n="close">Fermer</button>
      </div>
    </div>

    <!-- Seeds overlay: dedicated shop for cosmic seeds. Hidden by default -->
    <div id="seeds-overlay" class="seeds-overlay" hidden>
      <div class="seeds-content">
        <h2 data-i18n="seedsTitle">Boutique des graines</h2>
        <p id="seeds-count" class="seeds-count"></p>
        <div id="seeds-list" class="seeds-list"></div>
        <!-- Message displayed when no seed upgrades are available -->
        <div id="seeds-empty-msg" class="seeds-empty" hidden></div>
        <button id="seeds-close" class="seeds-close" data-i18n="close">Fermer</button>
      </div>
    </div>
    <!-- Settings overlay: configurable options such as sound, animations, contrast et langue -->
    <div id="settings-overlay" class="settings-overlay" hidden>
      <div class="settings-content">
        <h2 id="settings-title" data-i18n="settingsTitle">Options</h2>
        <div class="settings-item">
          <span data-i18n="optSound">Son</span>
          <label class="switch">
            <input type="checkbox" id="settings-sound" />
            <span class="slider"></span>
          </label>
        </div>
        <div class="settings-item">
          <span data-i18n="optAnim">Animations</span>
          <label class="switch">
            <input type="checkbox" id="settings-anim" />
            <span class="slider"></span>
          </label>
        </div>
        <div class="settings-item">
          <span data-i18n="optContrast">Contraste Ã©levÃ©</span>
          <label class="switch">
            <input type="checkbox" id="settings-contrast" />
            <span class="slider"></span>
          </label>
        </div>
        <div class="settings-item">
          <span data-i18n="optLang">Langue</span>
          <!-- Le sÃ©lecteur de langue affiche dÃ©sormais un menu dÃ©roulant unique avec les emojis
               correspondants. Les anciens boutons drapeaux sont conservÃ©s mais masquÃ©s afin
               de ne pas perturber la logique existante dans le script. -->
          <div id="language-flags" class="language-flags" style="display:none;">
            <!-- Boutons d'origine masquÃ©s -->
            <button type="button" class="lang-flag" data-lang="fr" title="FranÃ§ais">ðŸ‡«ðŸ‡·</button>
            <button type="button" class="lang-flag" data-lang="en" title="English">ðŸ‡¬ðŸ‡§</button>
            <button type="button" class="lang-flag" data-lang="ru" title="Ð ÑƒÑÑÐºÐ¸Ð¹">ðŸ‡·ðŸ‡º</button>
            <button type="button" class="lang-flag" data-lang="zh" title="ä¸­æ–‡">ðŸ‡¨ðŸ‡³</button>
            <button type="button" class="lang-flag" data-lang="ja" title="æ—¥æœ¬èªž">ðŸ‡¯ðŸ‡µ</button>
          </div>
          <!-- Menu dÃ©roulant avec les emojis de drapeau ou mascotte pour chaque langue.
               Chaque option utilise la valeur ISO de la langue pour que la logique
               existante continue de fonctionner. -->
          <select id="settings-language">
            <option value="fr">ðŸ‡«ðŸ‡·</option>
            <option value="en">ðŸ‡¬ðŸ‡§</option>
            <option value="ru">ðŸ‡·ðŸ‡º</option>
            <option value="zh">ðŸ‡¨ðŸ‡³</option>
            <option value="ja">ðŸ‡¯ðŸ‡µ</option>
            <!-- Nouvelle langue Capybara avec un emoji castor pour la reprÃ©senter -->
            <option value="capy">ðŸ¦«</option>
          </select>
        </div>
        <!-- Additional settings can be added here in the future -->
        <!-- Container for the skin selector.  Its content is generated
             dynamically in JavaScript when at least one additional skin
             (Aubergine or Banane) is unlocked.  Initially hidden. -->
        <div class="settings-item" id="skin-setting" hidden></div>

        <!-- Champ de texte discret permettant dâ€™activer le mode dieu.
             Aucun texte descriptif nâ€™explique sa fonction afin quâ€™il
             ressemble Ã  un simple champ libre.  Lorsque le joueur saisit
             "dieu est grand" dans ce champ, le mode dieu sâ€™active ; en
             tapant "dieu est petit", il se dÃ©sactive.  Voir main.js pour
             la gestion de cet easter egg. -->
        <div class="settings-item" style="margin-top:12px;">
          <input type="text" id="god-input" aria-label="Champ secret" placeholder="" style="width:100%; background-color:#f4f4f4; border:1px solid #ccc; border-radius:8px; padding:6px; color:#333;" />
        </div>

        <!-- Bouton de rÃ©initialisation. Permet au joueur d'effacer totalement sa progression. -->
        <div class="settings-item">
          <button id="reset-btn" class="reset-btn" data-i18n="optReset" style="width:100%; padding:8px; margin-top:8px; background-color:#e74c3c; color:#fff; border:none; border-radius:8px; cursor:pointer;">
            RÃ©initialiser la partie
          </button>
        </div>
        <button id="settings-close" class="settings-close" data-i18n="close">Fermer</button>
      </div>
    </div>

    <!-- La boutique des graines est fusionnÃ©e avec la boutique principale. Pas d'overlay dÃ©diÃ©. -->
    </main>
    <!-- Main game script
         Ajout d'un paramÃ¨tre de version Ã  l'URL pour contourner le cache du service worker.
         Lorsqu'on modifie le script principal, incrÃ©mentez la valeur aprÃ¨s v= afin que la
         requÃªte rÃ©cupÃ¨re la nouvelle version au lieu de servir une version obsolÃ¨te. -->
    <!-- IncrÃ©menter le paramÃ¨tre de version lorsque le script change pour forcer la mise Ã  jour Ã  travers le service worker -->
    <!-- IncrÃ©menter le paramÃ¨tre de version lorsque le script change pour forcer la mise Ã  jour Ã  travers le service worker -->
    <!-- Bump the version to force the browser to reload the updated JS -->
    <!-- Ajout d'un bouton de retour vers CapyGames. Ce lien s'ouvre dans un nouvel onglet. -->
    <div class="capygames-link">
      <a href="https://oursmalin.ovh/Capy/games.html" target="_blank">Retour vers CapyGames</a>
    </div>
    <!-- Augmentez ce numÃ©ro Ã  chaque fois que le fichier js/main.js est modifiÃ© afin d'invalider le cache du service worker. -->
    <!-- main.js rÃ©cupÃ¨re dÃ©sormais les news dynamiques depuis news.json -->
    <!-- Version bump: increment the v= parameter whenever main.js changes to
         force the service worker to fetch the latest script. Align with
         clicker/index.html version. -->
    <script src="js/main.js?v=99"></script>

  <!-- HoneypotÂ : lien invisible destinÃ© Ã  piÃ©ger les scrapers et robots. Aucun
       fichier ne correspond Ã  cette URL ; les humains ne verront pas cet Ã©lÃ©ment. -->
  <div style="display:none">
    <a href="/secret/9e2f7d.html">Ne pas cliquer</a>
  </div>
  </body>
</html>